{"ast":null,"code":"import React, { useCallback, useEffect, useState } from 'react';\nimport { Button, Form, Input } from 'antd';\nimport Link from 'next/link';\nimport { useDispatch, useSelector } from 'react-redux'; // import Router from 'next/router';\n// import Router from 'next/router';\n\nimport Router from 'next/router';\nimport { loginRequestAction, SIGN_UP_RESET, SIGN_UP_SUCCESS } from '../reducers/user';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nconst Login = () => {\n  const {\n    logInDone,\n    logInLoading,\n    logInError\n  } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  const {\n    0: id,\n    1: setId\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const onChangeId = useCallback(e => {\n    setId(e.target.value);\n  }, []);\n  const onChangePassword = useCallback(e => {\n    setPassword(e.target.value);\n  }, []);\n  useEffect(() => {\n    if (logInError) {\n      alert(logInError);\n      dispatch({\n        type: SIGN_UP_RESET // logInError를 초기화해줌\n\n      });\n    }\n  }, [logInError]); // 리듀서로 action.error를 받아서 서버 에러 출력☆\n  // 회원가입 직후 상태일 때, 같은 logInError를 또다시 출력하므로\n  // SIGN_UP_REQUEST 리듀서에서 logInError를 null로 변경해주었음\n\n  useEffect(() => {\n    if (logInDone) {\n      Router.push('/');\n      console.log(logInDone);\n      dispatch({\n        type: SIGN_UP_SUCCESS // 로그인 상태일때, 회원가입창 못가게 만들어줌.\n\n      });\n    }\n  }, [logInDone]);\n  const onSubmitForm = useCallback(() => {\n    dispatch(loginRequestAction({\n      id,\n      password\n    }));\n    console.log(id, password);\n  }, [id, password]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: {\n      width: '1000px',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      style: {\n        margin: 20\n      }\n    }), /*#__PURE__*/_jsxs(Form, {\n      onFinish: onSubmitForm,\n      style: {\n        margin: 20\n      },\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"user-id\",\n          children: \"\\uC544\\uC774\\uB514\"\n        }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"input\", {\n          name: \"user-id\",\n          value: id,\n          onChange: onChangeId,\n          required: true\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          marginTop: '5px'\n        },\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"user-password\",\n          children: \"\\uBE44\\uBC00\\uBC88\\uD638\"\n        }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Input, {\n          name: \"user-password\",\n          type: \"password\",\n          value: password,\n          onChange: onChangePassword,\n          required: true\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(Button, {\n          style: {\n            marginTop: 15\n          },\n          htmlType: \"submit\",\n          loading: logInLoading,\n          children: \"\\uB85C\\uADF8\\uC778\"\n        }), \"\\xA0\\xA0\", /*#__PURE__*/_jsx(Link, {\n          href: \"/Signup\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(Button, {\n              children: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n            })\n          })\n        })]\n      })]\n    })]\n  });\n};\n\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}